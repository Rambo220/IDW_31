<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Usuarios Registrados</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="common/css/estilo.css" rel="stylesheet" media="screen" />
</head>
<body class="admin" data-theme="light" data-scope="admin">

  <nav class="navbar navbar-expand-lg navbar-dark brand-bar">
    <div class="container-fluid">
      <a class="navbar-brand" href="index-admin.html">
        <img src="common/img/Logo_del_Centro_Medico_IDW.png" alt="Logo Centro Médico IDW" class="logo" />
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menuAdmin">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="menuAdmin">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0" id="navLinksAdmin"></ul>
        <span id="welcomeUser" class="navbar-text ms-3">Hola, Admin</span>
        <button id="btnLogout" class="btn btn-outline-light ms-3">
          <i class="bi bi-box-arrow-right"></i> Cerrar sesión
        </button>
        <button id="btnTheme" class="btn btn-outline-light ms-2" title="Cambiar tema">
          <i id="d1-icon" class="bi bi-moon-fill"></i>
        </button>
      </div>
    </div>
  </nav>

  <div class="container py-5">
    <h2 class="text-center mb-4">Usuarios Registrados</h2>
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle shadow-sm">
        <thead class="table-dark">
          <tr>
            <th>#ID</th>
            <th>Nombre</th>
            <th>Apellido</th>
            <th>Usuario</th>
            <th>Email</th>
          </tr>
        </thead>
        <tbody id="tbody-usuarios">
          <tr>
            <td colspan="5" class="text-center text-muted">Cargando usuarios...</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <footer class="brand-bar text-white text-center py-3 mt-auto">
    © 2025 IDW S.A — Panel Administrativo
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  <script src="common/js/app/admin-guard.js"></script>
  <script type="module" src="common/js/app/main.js"></script>

  <!-- Carga de usuarios desde DummyJSON -->
  <script type="module">
    const tbody = document.getElementById("tbody-usuarios");
    async function cargarUsuarios() {
      try {
        const res = await fetch("https://dummyjson.com/users");
        if (!res.ok) throw new Error("Error HTTP " + res.status);
        const { users } = await res.json();
        tbody.innerHTML = users.map(u => `
          <tr>
            <td>${u.id}</td>
            <td>${u.firstName}</td>
            <td>${u.lastName}</td>
            <td>${u.username}</td>
            <td>${u.email}</td>
          </tr>`).join("");
      } catch (err) {
        console.error(err);
        tbody.innerHTML = `<tr><td colspan="5" class="text-danger text-center">Error al cargar usuarios.</td></tr>`;
      }
    }
    cargarUsuarios();
  </script>

  <script>
    (function () {
      function syncBrand() {
        const nav = document.querySelector('.navbar');
        const footer = document.querySelector('footer');
        const dateStrip = document.querySelector('.nav-datetime');
        if (!nav || !footer) return;
        const navStyles = getComputedStyle(nav);
        const bg = navStyles.backgroundColor;
        const color = navStyles.color;
        footer.style.backgroundColor = bg;
        footer.style.color = color;
        footer.style.borderTop = 'none';
        if (dateStrip) {
          dateStrip.style.backgroundColor = bg;
          dateStrip.style.color = color;
          dateStrip.style.borderTop = '1px solid rgba(255,255,255,0.08)';
        }
      }
      document.addEventListener('DOMContentLoaded', syncBrand);
      new MutationObserver(syncBrand).observe(document.body, { attributes: true, attributeFilter: ['data-theme','class'] });
      window.addEventListener('resize', syncBrand);
      window.addEventListener('load', syncBrand);
    })();
  </script>
</body>
</html>
